# 使用 Tauri 开发轻量级前端项目管理器计划

## 1. 技术栈选择
- **核心框架**: Tauri v2 (Rust Backend + Web Frontend)
- **前端框架**: Vue 3 + Vite + TypeScript
- **样式方案**: UnoCSS (高性能原子化 CSS)
- **状态管理**: Pinia
- **路由管理**: Vue Router (可选，视页面复杂度定)
- **图标库**: UnoCSS Preset Icons (使用 Iconify 数据源，无额外打包体积)

## 2. 核心功能实现方案

### 2.1 Node 版本管理 (Rust)
- **原理**: 直接读取 `NVM_HOME` 环境变量指向的目录 (`D:\nvm`)。
- **实现**: 遍历目录下的子文件夹，过滤出符合版本号命名规则的文件夹，返回列表给前端。

### 2.2 项目脚本隔离运行 (Rust 核心)
- **痛点**: 全局切换 Node 版本会影响所有窗口。
- **解决方案**: 
    - 在启动项目脚本（如 `npm run dev`）的子进程时，**不修改系统全局环境变量**。
    - 而是构建一个**临时的 PATH 环境变量**。
    - 将用户选定的 Node 版本路径 (例如 `D:\nvm\v14.20.0`) 插入到 `PATH` 的**第一位**。
    - 这样该子进程及其衍生的所有进程都会优先使用该版本的 Node 和 NPM。

### 2.3 终端与编辑器集成
- **打开编辑器**: 调用 `Command` 执行用户配置的编辑器命令 (如 `code .`)。
- **打开终端**: 使用 Windows Terminal 或 cmd/powershell 启动并定位到项目目录。

## 3. 开发步骤

### Phase 1: 环境与脚手架 (需要用户协助)
1.  **用户操作**: 安装 Rust 和 C++ Build Tools。
2.  **初始化**: 创建 Tauri 项目结构。
3.  **配置**: 设置 UnoCSS, Pinia, 配置路径别名。

### Phase 2: Rust 后端开发 (`src-tauri`)
1.  `lib.rs`: 注册所有 Tauri 命令。
2.  `nvm.rs`: 实现 `get_nvm_list` 命令。
3.  `project.rs`: 实现 `scan_package_json` 命令。
4.  `runner.rs`: 实现 `run_script` 和 `open_in_editor` 命令，处理环境变量注入。

### Phase 3: 前端 UI 开发 (`src`)
1.  **组件开发**:
    - `ProjectCard.vue`: 项目展示卡片。
    - `AddProjectModal.vue`: 添加项目弹窗 (表单验证、自动识别展示)。
    - `ScriptRunner.vue`: 脚本运行控制台。
2.  **页面开发**:
    - `Dashboard.vue`: 主页网格布局。
    - `Settings.vue`: 设置项 (编辑器路径、默认终端)。
3.  **Store**:
    - `useProjectStore`: 持久化存储项目列表 (利用 `tauri-plugin-store` 或 `localStorage`).

### Phase 4: 验证与交付
1.  验证 NVM 版本读取是否准确。
2.  验证能否在一个项目用 Node 14 跑，另一个项目用 Node 18 跑。
3.  验证 UI 交互流畅度。

## 4. 目录结构规划
```
e:\frontendProjectManager\
├── src-tauri\
│   ├── src\
│   │   ├── main.rs
│   │   ├── lib.rs
│   │   ├── nvm.rs      // NVM 逻辑
│   │   └── runner.rs   // 运行逻辑
│   ├── tauri.conf.json
│   └── Cargo.toml
├── src\
│   ├── components\
│   ├── stores\
│   ├── views\
│   ├── App.vue
│   └── main.ts
├── package.json
└── vite.config.ts
```
